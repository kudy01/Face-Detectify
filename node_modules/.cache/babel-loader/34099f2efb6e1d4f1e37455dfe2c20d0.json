{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ImageDrawer = void 0;\n\nconst tslib_1 = require(\"tslib\");\n\nconst Utils_1 = require(\"../Utils\");\n\nconst Enums_1 = require(\"../Enums\");\n\nclass ImageDrawer {\n  constructor() {\n    this.images = [];\n  }\n\n  getImages(container) {\n    const containerImages = this.images.filter(t => t.id === container.id);\n\n    if (!containerImages.length) {\n      this.images.push({\n        id: container.id,\n        images: []\n      });\n      return this.getImages(container);\n    } else {\n      return containerImages[0];\n    }\n  }\n\n  addImage(container, image) {\n    const containerImages = this.getImages(container);\n    containerImages === null || containerImages === void 0 ? void 0 : containerImages.images.push(image);\n  }\n\n  init(container) {\n    var _a;\n\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      const options = container.options;\n      const shapeOptions = options.particles.shape;\n\n      if (!Utils_1.Utils.isInArray(Enums_1.ShapeType.image, shapeOptions.type) && !Utils_1.Utils.isInArray(Enums_1.ShapeType.images, shapeOptions.type)) {\n        return;\n      }\n\n      const imageOptions = (_a = shapeOptions.options[Enums_1.ShapeType.images]) !== null && _a !== void 0 ? _a : shapeOptions.options[Enums_1.ShapeType.image];\n\n      if (imageOptions instanceof Array) {\n        for (const optionsImage of imageOptions) {\n          yield this.loadImageShape(container, optionsImage);\n        }\n      } else {\n        yield this.loadImageShape(container, imageOptions);\n      }\n    });\n  }\n\n  destroy() {\n    this.images = [];\n  }\n\n  loadImageShape(container, imageShape) {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      try {\n        const image = imageShape.replaceColor ? yield Utils_1.Utils.downloadSvgImage(imageShape.src) : yield Utils_1.Utils.loadImage(imageShape.src);\n        this.addImage(container, image);\n      } catch (_a) {\n        console.warn(`tsParticles error - ${imageShape.src} not found`);\n      }\n    });\n  }\n\n  draw(context, particle, radius, opacity) {\n    var _a, _b;\n\n    if (!context) {\n      return;\n    }\n\n    const image = particle.image;\n    const element = (_a = image === null || image === void 0 ? void 0 : image.data) === null || _a === void 0 ? void 0 : _a.element;\n\n    if (!element) {\n      return;\n    }\n\n    const ratio = (_b = image === null || image === void 0 ? void 0 : image.ratio) !== null && _b !== void 0 ? _b : 1;\n    const pos = {\n      x: -radius,\n      y: -radius\n    };\n\n    if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n      context.globalAlpha = opacity;\n    }\n\n    context.drawImage(element, pos.x, pos.y, radius * 2, radius * 2 / ratio);\n\n    if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n      context.globalAlpha = 1;\n    }\n  }\n\n}\n\nexports.ImageDrawer = ImageDrawer;","map":{"version":3,"sources":["/Users/kudy/Desktop/Face-Detectify/node_modules/tsparticles/dist/ShapeDrawers/ImageDrawer.js"],"names":["Object","defineProperty","exports","value","ImageDrawer","tslib_1","require","Utils_1","Enums_1","constructor","images","getImages","container","containerImages","filter","t","id","length","push","addImage","image","init","_a","__awaiter","options","shapeOptions","particles","shape","Utils","isInArray","ShapeType","type","imageOptions","Array","optionsImage","loadImageShape","destroy","imageShape","replaceColor","downloadSvgImage","src","loadImage","console","warn","draw","context","particle","radius","opacity","_b","element","data","ratio","pos","x","y","svgData","globalAlpha","drawImage"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImageDrawer = void 0;\nconst tslib_1 = require(\"tslib\");\nconst Utils_1 = require(\"../Utils\");\nconst Enums_1 = require(\"../Enums\");\nclass ImageDrawer {\n    constructor() {\n        this.images = [];\n    }\n    getImages(container) {\n        const containerImages = this.images.filter((t) => t.id === container.id);\n        if (!containerImages.length) {\n            this.images.push({\n                id: container.id,\n                images: [],\n            });\n            return this.getImages(container);\n        }\n        else {\n            return containerImages[0];\n        }\n    }\n    addImage(container, image) {\n        const containerImages = this.getImages(container);\n        containerImages === null || containerImages === void 0 ? void 0 : containerImages.images.push(image);\n    }\n    init(container) {\n        var _a;\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const options = container.options;\n            const shapeOptions = options.particles.shape;\n            if (!Utils_1.Utils.isInArray(Enums_1.ShapeType.image, shapeOptions.type) &&\n                !Utils_1.Utils.isInArray(Enums_1.ShapeType.images, shapeOptions.type)) {\n                return;\n            }\n            const imageOptions = (_a = shapeOptions.options[Enums_1.ShapeType.images]) !== null && _a !== void 0 ? _a : shapeOptions.options[Enums_1.ShapeType.image];\n            if (imageOptions instanceof Array) {\n                for (const optionsImage of imageOptions) {\n                    yield this.loadImageShape(container, optionsImage);\n                }\n            }\n            else {\n                yield this.loadImageShape(container, imageOptions);\n            }\n        });\n    }\n    destroy() {\n        this.images = [];\n    }\n    loadImageShape(container, imageShape) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            try {\n                const image = imageShape.replaceColor\n                    ? yield Utils_1.Utils.downloadSvgImage(imageShape.src)\n                    : yield Utils_1.Utils.loadImage(imageShape.src);\n                this.addImage(container, image);\n            }\n            catch (_a) {\n                console.warn(`tsParticles error - ${imageShape.src} not found`);\n            }\n        });\n    }\n    draw(context, particle, radius, opacity) {\n        var _a, _b;\n        if (!context) {\n            return;\n        }\n        const image = particle.image;\n        const element = (_a = image === null || image === void 0 ? void 0 : image.data) === null || _a === void 0 ? void 0 : _a.element;\n        if (!element) {\n            return;\n        }\n        const ratio = (_b = image === null || image === void 0 ? void 0 : image.ratio) !== null && _b !== void 0 ? _b : 1;\n        const pos = {\n            x: -radius,\n            y: -radius,\n        };\n        if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n            context.globalAlpha = opacity;\n        }\n        context.drawImage(element, pos.x, pos.y, radius * 2, (radius * 2) / ratio);\n        if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n            context.globalAlpha = 1;\n        }\n    }\n}\nexports.ImageDrawer = ImageDrawer;\n"]},"metadata":{},"sourceType":"script"}